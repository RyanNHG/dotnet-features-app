version: '3'
services:
  web:
    build:
      context: .
      dockerfile: ./docker/Web.Dockerfile
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - DOTNET_USE_POLLING_FILE_WATCHER=true
    ports:
      - 5000:5000
    volumes:
      - ./project.csproj:/usr/src/app/project.csproj
      - ./Program.cs:/usr/src/app/Program.cs
      - ./Config:/usr/src/app/Config
      - ./Web:/usr/src/app/Web
      - ./Services:/usr/src/app/Services
      - ./wwwroot:/usr/src/app/wwwroot
  builder:
    build:
      context: .
      dockerfile: ./docker/Builder.Dockerfile
    volumes:
      - ./package.json:/usr/src/app/package.json
      - ./gulpfile.js:/usr/src/app/gulpfile.js
      - ./styles:/usr/src/app/styles
      - ./wwwroot:/usr/src/app/wwwroot